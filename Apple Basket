local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/Kavo-UI-Libraries/Kavo-UI/main/source.lua"))()
local Window = Library.CreateLib("Shop GUI", "Midnight")

local ShopTab = Window:NewTab("Shop")
local ShopSection = ShopTab:NewSection("Shop Features")

-- Toggles state
local autoBasketEnabled = false
local buyApplesEnabled = false

-- Auto Basket Toggle
ShopSection:NewToggle("Auto Basket", "Fires goldenAppleBasket trade every 0.1s", function(state)
    autoBasketEnabled = state
    if state then
        task.spawn(function()
            while autoBasketEnabled do
                local args = {
                    [1] = "\1",
                    [2] = "Trade",
                    [3] = "goldenAppleBasket"
                }

                pcall(function()
                    game:GetService("ReplicatedStorage")
                        :WaitForChild("Communication", 9e9)
                        :WaitForChild("Functions", 9e9)
                        :GetChildren()[16]
                        :FireServer(unpack(args))
                end)

                task.wait(0.1)
            end
        end)
    end
end)

-- Buy Apples Toggle
ShopSection:NewToggle("Buy Apples", "Buys apples every 0.9s", function(state)
    buyApplesEnabled = state
    if state then
        task.spawn(function()
            while buyApplesEnabled do
                local args = {
                    [1] = "BuyShopItem",
                    [2] = "Farm Shop",
                    [3] = 6,
                    [4] = 1000,
                }

                pcall(function()
                    game:GetService("ReplicatedStorage")
                        :WaitForChild("Communication", 9e9)
                        :WaitForChild("Events", 9e9)
                        :GetChildren()[18]
                        :FireServer(unpack(args))
                end)

                task.wait(0.9)
            end
        end)
    end
end)
