-- L key to toggle GUI visibility with fade animation
local fadeTime = 0.25
local guiVisible = true

local function setGuiTransparency(transparency)
    for _, descendant in ipairs(gui:GetDescendants()) do
        if descendant:IsA("GuiObject") then
            descendant.BackgroundTransparency = transparency
            if descendant:IsA("TextLabel") or descendant:IsA("TextButton") then
                descendant.TextTransparency = transparency
            end
        end
    end
end

local function tweenGuiVisibility(visible)
    local goalTransparency = visible and 0 or 1

    for _, obj in ipairs(gui:GetDescendants()) do
        if obj:IsA("GuiObject") then
            local tweenInfo = TweenInfo.new(fadeTime, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
            local props = {BackgroundTransparency = goalTransparency}

            if obj:IsA("TextLabel") or obj:IsA("TextButton") then
                props.TextTransparency = goalTransparency
            end

            TweenService:Create(obj, tweenInfo, props):Play()
        end
    end
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.L then
        guiVisible = not guiVisible
        tweenGuiVisibility(guiVisible)
    end
end)
