-- Full Roblox GUI Script with 7.5s Wait on Lunar/Volcano

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Island Utility GUI", "DarkTheme")

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
local Workspace = game:GetService("Workspace")

local exclusions = {
    ["de07d6c1-fa49-440a-bb41-b1cca478bc37"] = true,
    ["de31ac95-029b-4c26-b9f8-4b61faed7335"] = true,
}

-- Function to teleport to all Body parts in a folder
local function teleportToBodies(folder)
    for _, child in ipairs(folder:GetChildren()) do
        if not exclusions[child.Name] and child:FindFirstChild("Body") then
            HumanoidRootPart.CFrame = child.Body.CFrame
            task.wait(0.5)
        end
    end
end

-- Function to scan both Workspace and Explorer
local function scanForBodies(islandName)
    local containers = {
        Workspace:FindFirstChild("Islands") and Workspace.Islands:FindFirstChild(islandName),
        Workspace:FindFirstChild("Explorer") and Workspace.Explorer:FindFirstChild(islandName),
        Workspace:FindFirstChild(islandName),
    }

    for _, container in ipairs(containers) do
        if container then
            teleportToBodies(container)
        end
    end
end

-- Main Tab
local MainTab = Window:NewTab("Main")
local MainSection = MainTab:NewSection("Island Teleports")

MainSection:NewToggle("Jungle Island", "Teleport to Jungle Island Bodies", function(state)
    _G.JungleIslandLoop = state
    while _G.JungleIslandLoop do
        scanForBodies("Jungle Island")
        task.wait(1)
    end
end)

MainSection:NewToggle("Mainland", "Teleport to Mainland Bodies", function(state)
    _G.MainlandLoop = state
    while _G.MainlandLoop do
        scanForBodies("Mainland")
        task.wait(1)
    end
end)

-- Auto Tab
local AutoTab = Window:NewTab("Auto")
local AutoSection = AutoTab:NewSection("Selling & Catching")

AutoSection:NewToggle("Sell Commons", "Toggle selling common pets", function(state)
    _G.SellCommons = state
    while _G.SellCommons do
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CrimsonsMoons/Jasmine/main/Sell%20Commons"))()
        task.wait(5)
    end
end)

AutoSection:NewToggle("Sell Specials", "Toggle selling special pets", function(state)
    _G.SellSpecials = state
    while _G.SellSpecials do
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CrimsonsMoons/Jasmine/refs/heads/main/Sell%20Specials", true))()
        task.wait(5)
    end
end)

AutoSection:NewToggle("Islands 1,2,3", "Auto Catch 1", function(state)
    _G.AutoCatch1 = state
    while _G.AutoCatch1 do
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CrimsonsMoons/Jasmine/refs/heads/main/Auto%20Catch%201", true))()
        task.wait(5)
    end
end)

AutoSection:NewToggle("4,5,6", "Auto Catch 2", function(state)
    _G.AutoCatch2 = state
    while _G.AutoCatch2 do
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CrimsonsMoons/Jasmine/refs/heads/main/Auto%20Catch%202", true))()
        task.wait(5)
    end
end)

AutoSection:NewToggle("7,8,9", "Auto Catch 3", function(state)
    _G.AutoCatch3 = state
    while _G.AutoCatch3 do
        loadstring(game:HttpGet("https://raw.githubusercontent.com/CrimsonsMoons/Jasmine/refs/heads/main/Auto%20Catch%203", true))()
        task.wait(5)
    end
end)

-- Lunar/Volcano Tab
local LunarTab = Window:NewTab("Lunar/Volcano")
local LunarSection = LunarTab:NewSection("Lunar Island")
local VolcanoSection = LunarTab:NewSection("Volcano Island")

local lunarPositions = {
    Vector3.new(-3097.42, 17.63, -3681.29),
    Vector3.new(-2759.49, 6.75, -2589.21),
    Vector3.new(-2207.14, 139.06, -1223.94),
    Vector3.new(-3266.91, 15.43, -1436.57),
    Vector3.new(-3357.76, 24.35, -2428.63),
}

local volcanoPositions = {
    Vector3.new(2964.75, 108.95, -7078.36),
    Vector3.new(4134.52, 27.05, -6894.69),
    Vector3.new(4757.52, 26.14, -7939.01),
    Vector3.new(3487.49, 21, -8586.86),
}

local function loopIslandTeleport(islandName, positions, toggleFlag)
    _G[toggleFlag] = true
    coroutine.wrap(function()
        while _G[toggleFlag] do
            for _, pos in ipairs(positions) do
                local found = false
                local containers = {
                    Workspace:FindFirstChild("Islands") and Workspace.Islands:FindFirstChild(islandName),
                    Workspace:FindFirstChild("Explorer") and Workspace.Explorer:FindFirstChild(islandName),
                    Workspace:FindFirstChild(islandName),
                }
                for _, container in ipairs(containers) do
                    if container then
                        for _, child in ipairs(container:GetChildren()) do
                            if not exclusions[child.Name] and child:FindFirstChild("Body") then
                                HumanoidRootPart.CFrame = child.Body.CFrame
                                found = true
                                task.wait(0.5)
                            end
                        end
                    end
                end
                if not found then
                    HumanoidRootPart.CFrame = CFrame.new(pos)
                    task.wait(7.5)
                end
            end
        end
    end)()
end

LunarSection:NewToggle("Lunar Explore", "Teleport to Lunar Positions", function(state)
    _G.LunarLoop = state
    if state then
        loopIslandTeleport("Lunar Island", lunarPositions, "LunarLoop")
    end
end)

VolcanoSection:NewToggle("Volcano Explore", "Teleport to Volcano Positions", function(state)
    _G.VolcanoLoop = state
    if state then
        loopIslandTeleport("Volcano Island", volcanoPositions, "VolcanoLoop")
    end
end)

VolcanoSection:NewButton("Remove Lava", "Removes damaging lava parts", function()
    while true do
        local folder = Workspace:WaitForChild("Islands"):WaitForChild("Volcano Island")
            :WaitForChild("LavaParts"):WaitForChild("Folder")

        for _, part in ipairs(folder:GetChildren()) do
            if part:IsA("BasePart") then
                for _, child in ipairs(part:GetChildren()) do
                    if child:IsA("TouchTransmitter") then
                        child:Destroy()
                    end
                end
            end
        end

        print("All TouchInterests removed.")
        task.wait(5)
    end
end)

-- Handle character respawn
LocalPlayer.CharacterAdded:Connect(function(char)
    Character = char
    HumanoidRootPart = Character:WaitForChild("HumanoidRootPart")
end)
