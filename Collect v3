local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local IslandsFolder = workspace:WaitForChild("Islands")

local uuidPattern = "%b{}"

local targetPartNames = {
    "Rocks",
    "Rock",
    "Fabric",
    "Flower",
    "Rocks 2",
    "Bush (1)",
    "Wheat Plane",
    "Rock 1",
    "Leaf",
    "Coconut",
    "Hay",
    "StrawBerries",
    "Log"     -- UUID only
}

local function getHRP()
    local char = LocalPlayer.Character
    if not char then return nil end
    return char:FindFirstChild("HumanoidRootPart")
end

local function isTargetName(name, parentName)
    for _, targetName in ipairs(targetPartNames) do
        if name == targetName then
            -- Log is UUID only
            if targetName == "Log" then
                return parentName:match(uuidPattern) ~= nil
            end
            return true
        end
    end
    return false
end

local function findTargets(folder)
    local results = {}
    for _, descendant in ipairs(folder:GetDescendants()) do
        if descendant:IsA("BasePart") or descendant:IsA("MeshPart") or descendant:IsA("UnionOperation") then
            -- Check attribute first
            if descendant:GetAttribute("interactionType") == "CollectableItem" then
                table.insert(results, descendant)
            elseif isTargetName(descendant.Name, descendant.Parent and descendant.Parent.Name or "") then
                table.insert(results, descendant)
            end
        end
    end
    return results
end

while true do
    local hrp = getHRP()
    if hrp then
        for _, island in ipairs(IslandsFolder:GetChildren()) do
            local targets = findTargets(island)
            for _, part in ipairs(targets) do
                hrp.CFrame = part.CFrame + Vector3.new(0, 5, 0)
                task.wait(0.3)
            end
        end
    else
        task.wait(0.5)
    end
    task.wait(1)
end
