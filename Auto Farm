local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")

local LocalPlayer = Players.LocalPlayer

local Islands = Workspace:WaitForChild("Islands", 9e9)
local forestIsland = Islands:WaitForChild("Forest Island", 9e9)

local Communication = ReplicatedStorage:WaitForChild("Communication", 9e9)
local FunctionsFolder = Communication:WaitForChild("Functions", 9e9)
local engageFunction = FunctionsFolder:GetChildren()[4]

while true do
    local Character = LocalPlayer.Character
    if Character and Character:FindFirstChild("HumanoidRootPart") then
        local RootPart = Character.HumanoidRootPart

        for _, uuidFolder in ipairs(forestIsland:GetChildren()) do
            if uuidFolder.Name:match("^%b{}$") then
                local success, pivot = pcall(function()
                    return uuidFolder:GetPivot()
                end)
                if success and pivot then
                    local distance = (pivot.Position - RootPart.Position).Magnitude
                    if distance <= 20 then
                        local args = {
                            [1] = " ";
                            [2] = "Engage";
                            [3] = uuidFolder;
                        }
                        engageFunction:FireServer(unpack(args))
                    end
                end
            end
        end
    end

    task.wait(.4)  --- wait 5 seconds before checking again
end
