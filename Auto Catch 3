local lastFound = true
local lastPrintTime = 0
local printCooldown = 5 -- seconds between "no target" messages

while true do
    local playerPos = getPlayerPosition()
    if playerPos then
        local found = false

        -- 1. Search the 3 target islands
        for _, islandName in ipairs(ISLAND_NAMES) do
            local island = IslandsFolder:FindFirstChild(islandName)
            if island then
                for _, model in ipairs(island:GetChildren()) do
                    if isUUID(model.Name)
                        and not EXCLUSIONS[model.Name]
                        and model:FindFirstChild("Body") then

                        local dist = (model.Body.Position - playerPos).Magnitude
                        if dist <= 15 then
                            task.spawn(activateToolsOn, model)
                            found = true
                        end
                    end
                end
            end
        end

        -- 2. Search top-level UUIDs
        for _, model in ipairs(Workspace:GetChildren()) do
            if isUUID(model.Name)
                and not EXCLUSIONS[model.Name]
                and model:FindFirstChild("Body") then

                local dist = (model.Body.Position - playerPos).Magnitude
                if dist <= 15 then
                    task.spawn(activateToolsOn, model)
                    found = true
                end
            end
        end

        -- Print only if enough time has passed
        if not found and (tick() - lastPrintTime) >= printCooldown then
            print("⚠️ No valid targets nearby.")
            lastPrintTime = tick()
        end

        lastFound = found
    end

    task.wait(0.75)
end
